<SKIPPED_HTML_EDIT_MODE></SKIPPED_HTML_EDIT_MODE>

Saya perlu membuat aplikasi fullstack untuk membuat QR Code dari file upload dalam satu file gabungan. User akan mengunggah file, sistem akan menyimpannya di server, lalu menghasilkan URL unik yang mengarah ke file tersebut, dan menampilkan QR Code.

Karena diminta dalam satu file gabungan, saya akan menggunakan format HTML dengan inline JavaScript untuk frontend dan backend. Namun perlu dicatat bahwa dalam implementasi nyata, backend seharusnya terpisah untuk keamanan dan skalabilitas.

Saya akan membuat:
1. HTML structure dengan form upload
2. CSS untuk styling responsif
3. JavaScript untuk frontend (menangani upload, menampilkan QR)
4. JavaScript untuk backend simulasi (menggunakan localStorage sebagai ganti filesystem, karena browser tidak bisa akses filesystem langsung)

Untuk mensimulasikan backend, saya akan menggunakan localStorage untuk menyimpan file data dengan URL unik.

Perlu menggunakan library QR Code, saya akan gunakan CDN untuk qrcode.js


`qrcode-file-share.html`
```html
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code File Share - Upload & Generate</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        .file-drop-area {
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .file-drop-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        
        .file-drop-area.error {
            border-color: #ef4444;
            background-color: #fef2f2;
        }
        
        .file-drop-area.success {
            border-color: #10b981;
            background-color: #f0fdf4;
        }
        
        .qr-code-container {
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
        }
        
        .qr-code-container.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .file-preview {
            max-width: 200px;
            max-height: 200px;
            margin: 0 auto;
            border-radius: 8px;
            overflow: hidden;
        }
        
        @media (max-width: 640px) {
            .container {
                padding: 1rem;
            }
            
            .file-drop-area {
                padding: 20px 10px;
            }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm">
        <div class="max-w-6xl mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                        </svg>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800">QR File Share</h1>
                </div>
                <div class="text-sm text-gray-600">
                    Upload • Share • Access
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 py-8">
        <div class="bg-white rounded-xl shadow-lg p-6 md:p-8">
            <!-- Upload Section -->
            <div class="text-center mb-8">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">Upload File & Generate QR Code</h2>
                <p class="text-gray-600">Unggah file Anda dan dapatkan QR Code untuk berbagi dengan mudah</p>
            </div>

            <!-- File Drop Area -->
            <div id="fileDropArea" class="file-drop-area mb-6 cursor-pointer">
                <input type="file" id="fileInput" class="hidden" accept="*/*">
                <div class="space-y-4">
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                        </svg>
                    </div>
                    <div>
                        <p class="text-lg font-medium text-gray-700">Drop file here or click to browse</p>
                        <p class="text-sm text-gray-500">Supports all file types (PDF, Images, Documents)</p>
                    </div>
                </div>
            </div>

            <!-- File Info -->
            <div id="fileInfo" class="hidden mb-6 p-4 bg-gray-50 rounded-lg">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div id="fileIcon" class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                            </svg>
                        </div>
                        <div>
                            <p id="fileName" class="font-medium text-gray-800 truncate max-w-xs"></p>
                            <p id="fileSize" class="text-sm text-gray-500"></p>
                        </div>
                    </div>
                    <button id="removeFile" class="text-red-500 hover:text-red-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>

            <!-- File Preview -->
            <div id="filePreview" class="hidden mb-6">
                <img id="previewImage" class="file-preview rounded-lg shadow-md" alt="File preview">
            </div>

            <!-- Upload Button -->
            <div class="text-center mb-8">
                <button id="uploadBtn" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed">
                    Generate QR Code
                </button>
            </div>

            <!-- Progress Bar -->
            <div id="progressContainer" class="hidden mb-6">
                <div class="bg-gray-200 rounded-full h-2">
                    <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                </div>
                <p id="progressText" class="text-center text-sm text-gray-600 mt-2">Uploading...</p>
            </div>

            <!-- Error Message -->
            <div id="errorMessage" class="hidden bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                <div class="flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <p id="errorText" class="text-red-700"></p>
                </div>
            </div>

            <!-- Success Section -->
            <div id="successSection" class="hidden">
                <div class="bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-600 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                        <h3 class="text-lg font-semibold text-green-800">Upload Success!</h3>
                    </div>
                    <p class="text-green-700 mb-4">Your file has been uploaded successfully. Share the QR code or URL below:</p>
                    
                    <div class="bg-white p-4 rounded-lg mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">File URL:</label>
                        <div class="flex items-center">
                            <input id="fileUrl" type="text" readonly class="flex-1 px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <button id="copyUrlBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-r-md transition-colors duration-200">
                                Copy
                            </button>
                        </div>
                    </div>
                </div>

                <!-- QR Code Display -->
                <div class="text-center">
                    <h3 class="text-xl font-semibold text-gray-800 mb-4">QR Code</h3>
                    <div id="qrCodeContainer" class="qr-code-container inline-block bg-white p-4 rounded-lg shadow-md">
                        <canvas id="qrCodeCanvas" width="256" height="256"></canvas>
                    </div>
                    <p class="text-gray-600 mt-4">Scan this QR code to download the file</p>
                    
                    <div class="mt-6 space-x-4">
                        <button id="downloadQrBtn" class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors duration-200">
                            Download QR Code
                        </button>
                        <button id="newUploadBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors duration-200">
                            Upload New File
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t mt-12 py-8">
        <div class="max-w-6xl mx-auto px-4 text-center text-gray-600">
            <p>&copy; 2024 QR File Share. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Simulated backend storage (in real app, this would be a server)
        const fileStorage = {
            files: new Map(),
            
            storeFile: function(fileData) {
                const fileId = Date.now().toString(36) + Math.random().toString(36).substr(2);
                this.files.set(fileId, fileData);
                
                // Simulate file persistence (in real app, this would be server storage)
                const storedFiles = JSON.parse(localStorage.getItem('uploadedFiles') || '{}');
                storedFiles[fileId] = fileData;
                localStorage.setItem('uploadedFiles', JSON.stringify(storedFiles));
                
                return fileId;
            },
            
            getFile: function(fileId) {
                // Check memory first, then localStorage
                if (this.files.has(fileId)) {
                    return this.files.get(fileId);
                }
                
                const storedFiles = JSON.parse(localStorage.getItem('uploadedFiles') || '{}');
                return storedFiles[fileId] || null;
            }
        };

        // DOM Elements
        const fileInput = document.getElementById('fileInput');
        const fileDropArea = document.getElementById('fileDropArea');
        const fileInfo = document.getElementById('fileInfo');
        const fileName = document.getElementById('fileName');
        const fileSize = document.getElementById('fileSize');
        const fileIcon = document.getElementById('fileIcon');
        const removeFile = document.getElementById('removeFile');
        const filePreview = document.getElementById('filePreview');
        const previewImage = document.getElementById('previewImage');
        const uploadBtn = document.getElementById('uploadBtn');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progressText');
        const errorMessage = document.getElementById('errorMessage');
        const errorText = document.getElementById('errorText');
        const successSection = document.getElementById('successSection');
        const fileUrl = document.getElementById('fileUrl');
        const copyUrlBtn = document.getElementById('copyUrlBtn');
        const qrCodeContainer = document.getElementById('qrCodeContainer');
        const downloadQrBtn = document.getElementById('downloadQrBtn');
        const newUploadBtn = document.getElementById('newUploadBtn');

        let selectedFile = null;

        // Event Listeners
        fileDropArea.addEventListener('click', () => fileInput.click());
        fileInput.addEventListener('change', handleFileSelect);
        removeFile.addEventListener('click', resetFileSelection);
        uploadBtn.addEventListener('click', handleUpload);
        copyUrlBtn.addEventListener('click', copyUrlToClipboard);
        downloadQrBtn.addEventListener('click', downloadQRCode);
        newUploadBtn.addEventListener('click', resetAll);

        // Drag and drop functionality
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            fileDropArea.addEventListener(eventName, preventDefaults, false);
        });

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        ['dragenter', 'dragover'].forEach(eventName => {
            fileDropArea.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            fileDropArea.addEventListener(eventName, unhighlight, false);
        });

        function highlight() {
            fileDropArea.classList.add('dragover');
        }

        function unhighlight() {
            fileDropArea.classList.remove('dragover');
        }

        fileDropArea.addEventListener('drop', handleDrop, false);

        function handleDrop(e) {
            const dt = e.dataTransfer;
            const files = dt.files;
            if (files.length > 0) {
                handleFiles(files[0]);
            }
        }

        function handleFileSelect(e) {
            if (e.target.files.length > 0) {
                handleFiles(e.target.files[0]);
            }
        }

        function handleFiles(file) {
            // Validate file size (max 20MB)
            if (file.size > 20 * 1024 * 1024) {
                showError('File size exceeds 20MB limit');
                return;
            }

            selectedFile = file;
            updateFileInfo(file);
            showFilePreview(file);
            hideError();
            uploadBtn.disabled = false;
        }

        function updateFileInfo(file) {
            fileName.textContent = file.name;
            fileSize.textContent = formatFileSize(file.size);
            
            // Set appropriate icon based on file type
            const fileType = file.type.split('/')[0];
            let iconSvg = '';
            
            switch(fileType) {
                case 'image':
                    iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                    </svg>`;
                    break;
                case 'application':
                    if (file.type === 'application/pdf') {
                        iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>`;
                    } else {
                        iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>`;
                    }
                    break;
                default:
                    iconSvg = `<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>`;
            }
            
            fileIcon.innerHTML = iconSvg;
            fileInfo.classList.remove('hidden');
        }

        function showFilePreview(file) {
            if (file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    previewImage.src = e.target.result;
                    filePreview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            } else {
                filePreview.classList.add('hidden');
            }
        }

        function resetFileSelection() {
            selectedFile = null;
            fileInput.value = '';
            fileInfo.classList.add('hidden');
            filePreview.classList.add('hidden');
            uploadBtn.disabled = true;
            hideError();
        }

        async function handleUpload() {
            if (!selectedFile) {
                showError('Please select a file first');
                return;
            }

            uploadBtn.disabled = true;
            progressContainer.classList.remove('hidden');
            hideError();

            try {
                // Simulate upload progress
                for (let i = 0; i <= 100; i += 10) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                    progressBar.style.width = i + '%';
                    progressText.textContent = `Uploading... ${i}%`;
                }

                // Read file as base64 (simulating server processing)
                const fileData = await readFileAsBase64(selectedFile);
                
                // Store file data (simulate server storage)
                const fileId = fileStorage.storeFile({
                    name: selectedFile.name,
                    type: selectedFile.type,
                    size: selectedFile.size,
                    data: fileData,
                    uploadedAt: new Date().toISOString()
                });

                // Generate public URL (simulate server URL generation)
                const publicUrl = `${window.location.origin}${window.location.path